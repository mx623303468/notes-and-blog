<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 相关面试题 | YinXiaobo 的笔记</title>
    <meta name="description" content="">
    <link rel="icon" type="image/x-icon" href="/notes-and-blog/favicon.jpg">
    
    <link rel="preload" href="/notes-and-blog/assets/css/0.styles.85d49211.css" as="style"><link rel="preload" href="/notes-and-blog/assets/js/app.0b4b2de9.js" as="script"><link rel="preload" href="/notes-and-blog/assets/js/2.a69d6162.js" as="script"><link rel="preload" href="/notes-and-blog/assets/js/33.e7d18a0f.js" as="script"><link rel="preload" href="/notes-and-blog/assets/js/3.58d7ffb3.js" as="script"><link rel="prefetch" href="/notes-and-blog/assets/js/10.bbcd6b60.js"><link rel="prefetch" href="/notes-and-blog/assets/js/11.c09fda9c.js"><link rel="prefetch" href="/notes-and-blog/assets/js/12.79d7396e.js"><link rel="prefetch" href="/notes-and-blog/assets/js/13.17b5fc6c.js"><link rel="prefetch" href="/notes-and-blog/assets/js/14.a036b738.js"><link rel="prefetch" href="/notes-and-blog/assets/js/15.fbe4deb6.js"><link rel="prefetch" href="/notes-and-blog/assets/js/16.8a642816.js"><link rel="prefetch" href="/notes-and-blog/assets/js/17.021c6cd7.js"><link rel="prefetch" href="/notes-and-blog/assets/js/18.be8493d5.js"><link rel="prefetch" href="/notes-and-blog/assets/js/19.80a5448e.js"><link rel="prefetch" href="/notes-and-blog/assets/js/20.c0df8d2f.js"><link rel="prefetch" href="/notes-and-blog/assets/js/21.3bc653f6.js"><link rel="prefetch" href="/notes-and-blog/assets/js/22.d1875ead.js"><link rel="prefetch" href="/notes-and-blog/assets/js/23.184bc0b6.js"><link rel="prefetch" href="/notes-and-blog/assets/js/24.7d813daf.js"><link rel="prefetch" href="/notes-and-blog/assets/js/25.431b535c.js"><link rel="prefetch" href="/notes-and-blog/assets/js/26.7acf7171.js"><link rel="prefetch" href="/notes-and-blog/assets/js/27.3bfd2356.js"><link rel="prefetch" href="/notes-and-blog/assets/js/28.3fba9cac.js"><link rel="prefetch" href="/notes-and-blog/assets/js/29.24f037d5.js"><link rel="prefetch" href="/notes-and-blog/assets/js/30.73d0f407.js"><link rel="prefetch" href="/notes-and-blog/assets/js/31.c8afe2a6.js"><link rel="prefetch" href="/notes-and-blog/assets/js/32.37c1abef.js"><link rel="prefetch" href="/notes-and-blog/assets/js/34.cd78a2cc.js"><link rel="prefetch" href="/notes-and-blog/assets/js/4.3e8788b9.js"><link rel="prefetch" href="/notes-and-blog/assets/js/5.77584635.js"><link rel="prefetch" href="/notes-and-blog/assets/js/6.4e2d5b95.js"><link rel="prefetch" href="/notes-and-blog/assets/js/7.571ee1b3.js"><link rel="prefetch" href="/notes-and-blog/assets/js/8.0cf6aafe.js"><link rel="prefetch" href="/notes-and-blog/assets/js/9.20513daf.js">
    <link rel="stylesheet" href="/notes-and-blog/assets/css/0.styles.85d49211.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes-and-blog/" class="home-link router-link-active"><!----> <span class="site-name">YinXiaobo 的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Notes</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes-and-blog/js/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/notes-and-blog/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/notes-and-blog/css/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>构建工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes-and-blog/webpack/" class="nav-link router-link-active">Webpack</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes-and-blog/vue/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/notes-and-blog/react/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>综合</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes-and-blog/sundry/" class="nav-link">杂项</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/notes-and-blog/good-article/" class="nav-link">好文收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">一些项目</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-and-blog/music.html" class="nav-link">music</a></li><li class="dropdown-item"><!----> <a href="/notes-and-blog/pro.html" class="nav-link">PRO</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Notes</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes-and-blog/js/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/notes-and-blog/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/notes-and-blog/css/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>构建工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes-and-blog/webpack/" class="nav-link router-link-active">Webpack</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes-and-blog/vue/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/notes-and-blog/react/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>综合</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes-and-blog/sundry/" class="nav-link">杂项</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/notes-and-blog/good-article/" class="nav-link">好文收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">一些项目</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-and-blog/music.html" class="nav-link">music</a></li><li class="dropdown-item"><!----> <a href="/notes-and-blog/pro.html" class="nav-link">PRO</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/notes-and-blog/webpack/" class="sidebar-link">Webpack</a></li><li><a href="/notes-and-blog/webpack/webpack面试题.html" class="active sidebar-link">webpack 相关面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#与-webpack-类似的工具有哪些，为什么选择使用-webpack" class="sidebar-link">与 Webpack 类似的工具有哪些，为什么选择使用 Webpack?</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#webpack-与-grunt-gulp-这类打包工具有什么不同？" class="sidebar-link">Webpack 与 Grunt Gulp 这类打包工具有什么不同？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#什么是-npm-script，-npm-script-可以用来做什么？" class="sidebar-link">什么是 NPM Script， NPM Script 可以用来做什么？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#npm-的常用命令有哪些？" class="sidebar-link">NPM 的常用命令有哪些？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#webpack-cli-常用选项" class="sidebar-link">Webpack-cli 常用选项</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#webpack-的配置有几种写法，分别可以应用到什么场景？" class="sidebar-link">Webpack 的配置有几种写法，分别可以应用到什么场景？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#最基础的写法" class="sidebar-link">最基础的写法</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#函数型的配置" class="sidebar-link">函数型的配置</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#promise-类型的配置文件" class="sidebar-link">Promise 类型的配置文件</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#多配置数组" class="sidebar-link">多配置数组</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#如果要开发一个-jquery-插件、vue-组件等，需要怎么配置-webpack-？" class="sidebar-link">如果要开发一个 JQuery 插件、Vue 组件等，需要怎么配置 Webpack ？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#webpack-的占位符-hash-、-chunkhash-、-contenthash-有什么区别和联系？-最佳实践是什么？" class="sidebar-link">Webpack 的占位符 [hash] 、[chunkhash] 、 [contenthash] 有什么区别和联系？ 最佳实践是什么？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#webpack-的-sourcemap-有几种形式？-分别有什么特点？-sourcemap-配置的最佳实践是什么？" class="sidebar-link">Webpack 的 SourceMap 有几种形式？ 分别有什么特点？ SourceMap 配置的最佳实践是什么？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#什么是-bundle-，什么是-chunk-什么是-module-？" class="sidebar-link">什么是 bundle ，什么是 chunk 什么是 module ？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#能不能手写一个-webpack-配置？记住重点配置项：entry、output、module-rules（loader）和plugin。" class="sidebar-link">能不能手写一个 Webpack 配置？记住重点配置项：entry、output、module.rules（loader）和plugin。</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#在-js-文件中怎么调用-loader-来处理一个模块？" class="sidebar-link">在 JS 文件中怎么调用 Loader 来处理一个模块？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#loader-的解析顺序是怎样的？" class="sidebar-link">Loader 的解析顺序是怎样的？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#什么是-javascript-的模块化开发？有哪些可以遵循的规范？" class="sidebar-link">什么是 JavaScript 的模块化开发？有哪些可以遵循的规范？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#webpack-中怎么获取一个模块引用另外一个模块是传入的-query？" class="sidebar-link">Webpack 中怎么获取一个模块引用另外一个模块是传入的 query？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#怎么实现-webpack-的按需加载？什么是神奇注释？" class="sidebar-link">怎么实现 Webpack 的按需加载？什么是神奇注释？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#babel-的-preset-env-是什么？" class="sidebar-link">Babel 的 preset-env 是什么？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#懂得-babel-的原理吗？你会手写-babel-插件吗？" class="sidebar-link">懂得 Babel 的原理吗？你会手写 Babel 插件吗？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#babel-怎么做-polyfill，polyfill-的最佳实践是什么？" class="sidebar-link">Babel 怎么做 Polyfill，Polyfill 的最佳实践是什么？</a></li><li class="sidebar-sub-header"><a href="/notes-and-blog/webpack/webpack面试题.html#babel-怎么针对不同的浏览器打包不同的适配代码" class="sidebar-link">Babel 怎么针对不同的浏览器打包不同的适配代码?</a></li></ul></li><li><a href="/notes-and-blog/webpack/1.什么是webpack.html" class="sidebar-link">Webpack 是什么</a></li><li><a href="/notes-and-blog/webpack/2.什么是模块打包工具.html" class="sidebar-link">什么是模块打包工具</a></li><li><a href="/notes-and-blog/webpack/3.webpack的安装.html" class="sidebar-link">Webpack 的安装</a></li><li><a href="/notes-and-blog/webpack/3_2_打包js/打包js.html" class="sidebar-link">webpack 起步 - 打包 JS 文件</a></li><li><a href="/notes-and-blog/webpack/3_3_编译ES6_7/编译ES6_7.html" class="sidebar-link">编译 ES6 7</a></li><li><a href="/notes-and-blog/webpack/3-4-TypeScript配置/Typescript配置.html" class="sidebar-link">TypeScript 配置</a></li><li><a href="/notes-and-blog/webpack/3-5提取公共代码/提取公共代码.html" class="sidebar-link">使用 webpack 提取公共代码</a></li><li><a href="/notes-and-blog/webpack/3-6代码分割和懒加载/代码分割和懒加载.html" class="sidebar-link">代码分割 和 懒加载</a></li><li><a href="/notes-and-blog/webpack/3-9处理CSS/处理CSS.html" class="sidebar-link">处理 CSS</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-相关面试题"><a href="#webpack-相关面试题" aria-hidden="true" class="header-anchor">#</a> webpack 相关面试题</h1> <h2 id="与-webpack-类似的工具有哪些，为什么选择使用-webpack"><a href="#与-webpack-类似的工具有哪些，为什么选择使用-webpack" aria-hidden="true" class="header-anchor">#</a> 与 Webpack 类似的工具有哪些，为什么选择使用 Webpack?</h2> <p>产品成熟，社区生态好，有更多的最佳实践来参考。</p> <p>遇到问题能快速找到解决方案。</p> <p>有强大的插件系统，能灵活的满足不同的场景需求。</p> <h2 id="webpack-与-grunt-gulp-这类打包工具有什么不同？"><a href="#webpack-与-grunt-gulp-这类打包工具有什么不同？" aria-hidden="true" class="header-anchor">#</a> Webpack 与 Grunt Gulp 这类打包工具有什么不同？</h2> <p>Grunt Gulp 这类构建工具的思路是，<code>遍历源文件</code> -&gt; <code>匹配规则</code> -&gt; <code>打包输出</code>，这个过程中做不到按需加载，对打包出来的资源，页面是否使用，打包过程是不关心的。</p> <p>Webpack 是从入口文件开始，经过模块，依赖加载，分析和打包完成的项目构建。在这个过程中，依靠强大的插件系统，可以针对性的做一些解决方案。</p> <h2 id="什么是-npm-script，-npm-script-可以用来做什么？"><a href="#什么是-npm-script，-npm-script-可以用来做什么？" aria-hidden="true" class="header-anchor">#</a> 什么是 NPM Script， NPM Script 可以用来做什么？</h2> <p><code>NPM Script</code> 是 <code>NPM</code> 里的执行脚本功能，<code>Node</code> 的开发是离不开 <code>NPM</code> 的，而<code>NPM Script</code> 是 <code>NPM</code> 最常用、强大的功能之一。</p> <p><code>NPM</code> 允许在 <code>package.json</code> 文件中使用 <code>scripts</code> 字段定义脚本命令。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm-script&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的代码是 <code>package.json</code> 文件的一个片段，里面的 <code>scripts</code> 字段是一个对象，它的每一个属性，对应的就是一个脚本命令。比如上面的 <code>build</code> 命令，对应的脚本就是 <code>webpack</code> 。</p> <p>命令行下使用 <code>npm run</code> 命令。就可以执行定义的脚本了。</p> <p><code>npm run build</code> 等同于 <code>webpack</code></p> <h2 id="npm-的常用命令有哪些？"><a href="#npm-的常用命令有哪些？" aria-hidden="true" class="header-anchor">#</a> NPM 的常用命令有哪些？</h2> <ul><li><code>npm init</code> 初始化 NPM 环境，创建一个 <code>package.json</code> 文件</li> <li><code>npm install &lt;packageName&gt;</code> 安装 npm 包，可以指定包名安装某个具体的 npm 包。 通过 <code>--save-dev</code> 安装到 <code>devDependencies</code> 或者``--save<code>安装到</code>Dependencies`</li> <li><code>npm update</code> 更新 <code>NPM</code>包</li> <li><code>npm set</code> 设置 npm 配置</li> <li><code>npm config</code> 查看 npm 的配置信息</li> <li><code>npm list</code>展现当前项目安装的所有模块，以及对应的依赖</li> <li><code>npm search</code> 查找 npm 仓库</li> <li><code>npm info</code> 查看某个包的信息</li></ul> <p><a href="https://docs.npmjs.com/cli-documentation/" target="_blank" rel="noopener noreferrer">NPM 命令官网文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="webpack-cli-常用选项"><a href="#webpack-cli-常用选项" aria-hidden="true" class="header-anchor">#</a> Webpack-cli 常用选项</h2> <ul><li><code>--config</code> 指定配置文件路径</li> <li><code>--mode</code> 指定打包环境，可选值为 <code>development / production</code> 分别对应 <strong>开发环境</strong> 与 <strong>生产环境</strong></li> <li><code>--json</code> 输出详细的打包结果，可以使用 <code>webpack --json &gt; stats.json</code> 的方式将打包结果输出到指定的文件，用来分析打包结果。</li> <li><code>--progress</code> 显示打包进度条</li> <li><code>--color</code>,<code>--colors</code>,<code>--no-color</code>,<code>--no-colors</code> 控制控制台输出的内容是否开启颜色</li> <li><code>--display-error-details</code> 打印详细的错误信息</li> <li><code>--watch</code> 监听文件变化，没有变化的模块会在编译后，缓存到内存，每次只编译有变化的部分。</li> <li><code>--profile</code> 详细的输出每个环节的打包耗时，方便排查打包速度的瓶颈</li> <li><code>--hot</code> 开启 <code>Hot Module Replacement</code> (模块热更替)</li> <li><a href="https://webpack.js.org/api/cli/" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="webpack-的配置有几种写法，分别可以应用到什么场景？"><a href="#webpack-的配置有几种写法，分别可以应用到什么场景？" aria-hidden="true" class="header-anchor">#</a> Webpack 的配置有几种写法，分别可以应用到什么场景？</h2> <p>webpack 的配置文件可以通过创建一个 <code>webpack.config.js</code> 文件来使用，也可以通过 webpack-cli 命令行参数 <code>--config xxx.js</code> 来指定某个文件。</p> <h3 id="最基础的写法"><a href="#最基础的写法" aria-hidden="true" class="header-anchor">#</a> 最基础的写法</h3> <p>遵循 <code>CommonJS</code> 的规范，通过 <code>module.exports</code> 导出一个 Node.js 的模块。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="函数型的配置"><a href="#函数型的配置" aria-hidden="true" class="header-anchor">#</a> 函数型的配置</h3> <p>如果只使用一个配置文件来区分生产环境和开发环境时，就可以使用函数型的配置文件，函数必须返回一个配置对象。接受两个参数 <code>env</code> 和 <code>argv</code>，
分别对应 <strong>环境对象</strong> 和 <strong>webpack-cli 命令行选项参数</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> env<span class="token punctuation">.</span>production <span class="token operator">?</span> <span class="token string">'production'</span> <span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
    devtool<span class="token punctuation">:</span> env<span class="token punctuation">.</span>production <span class="token operator">?</span> <span class="token string">'source-maps'</span> <span class="token punctuation">:</span> <span class="token string">'eval'</span><span class="token punctuation">,</span>
    entry<span class="token punctuation">:</span> <span class="token string">'app.js'</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">//... },</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            compress<span class="token punctuation">:</span> argv<span class="token punctuation">[</span><span class="token string">'optimize-minimize'</span><span class="token punctuation">]</span> <span class="token comment">// 只有传入 -p 或 --optimize-minimize</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="promise-类型的配置文件"><a href="#promise-类型的配置文件" aria-hidden="true" class="header-anchor">#</a> Promise 类型的配置文件</h3> <p>如果需要异步加载一些变量作为配置，那么可以使用 Promise 的方式来做。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
        entry<span class="token punctuation">:</span> <span class="token string">'app.js'</span>
        <span class="token comment">/* ... */</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="多配置数组"><a href="#多配置数组" aria-hidden="true" class="header-anchor">#</a> 多配置数组</h3> <p>在一些特定场景，需要一次命令，打包多次，这时候就可以使用配置数组的方式，将两次以上的配置以数组的形式导出</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'production'</span>
    <span class="token comment">// 配置1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'development'</span>
    <span class="token comment">// 配置2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="如果要开发一个-jquery-插件、vue-组件等，需要怎么配置-webpack-？"><a href="#如果要开发一个-jquery-插件、vue-组件等，需要怎么配置-webpack-？" aria-hidden="true" class="header-anchor">#</a> 如果要开发一个 <code>JQuery</code> 插件、<code>Vue</code> 组件等，需要怎么配置 Webpack ？</h2> <h2 id="webpack-的占位符-hash-、-chunkhash-、-contenthash-有什么区别和联系？-最佳实践是什么？"><a href="#webpack-的占位符-hash-、-chunkhash-、-contenthash-有什么区别和联系？-最佳实践是什么？" aria-hidden="true" class="header-anchor">#</a> Webpack 的占位符 <code>[hash]</code> 、<code>[chunkhash]</code> 、 <code>[contenthash]</code> 有什么区别和联系？ 最佳实践是什么？</h2> <p>这几个占位符都会在打包后生产 hash 值。 都可以通过 <code>[xxx:length]</code>(默认 20) 的语法来指定长度。可以与其他占位符结合使用。例如： <code>[name].[hash:8].js</code></p> <ul><li><p><code>[hash]</code> 是整个项目的 hash 值，根据每次编译的内容计算得到的，每次编译后都会生产新的 hash 值，所以修改项目内的任何文件都会导致所有文件的 hash 值发生变化；
在一个项目中入口不同，但是生产的 hash 是相同的，所以 hash 无法实现前端静态资源在浏览器上长缓存，而应该使用 <code>chunkhash</code></p></li> <li><p><code>[chunkhash]</code> 是根据入口文件(entry)进行依赖解析，构建对应的 chunk，生成相应的 hash； 只要组成 entry 的模块没有改变，则对应的 hash 也是不变的，所以一般项目优化时，会将公共库代码拆分到一起，因为公共库代码变动较少，使用 <code>chunkhash</code> 可以发挥最长缓存的作用；</p></li> <li><p><code>[contenthash]</code> 在使用 chunkhash 会存在一个问题，当一个 JS 文件中引入了 CSS 文件， 编译后它们的 hash 是相同的。只要 JS 文件内容发生变化，再次编译后，hash 就会发生变化。而与之关联的，没有任何改变 CSS 文件的 hash 也会发生改变。针对这种情况，可以把 CSS 从 JS 中使用 <code>mini-css-extract-plugin</code> 或者 <code>extract-text-webpack-plugin</code> 抽离出来并使用 contenthash</p></li> <li><p>目前支持的占位符</p> <table><thead><tr><th>占位符</th> <th>含义</th></tr></thead> <tbody><tr><td><code>[hash]</code></td> <td>模块标识符的hash</td></tr> <tr><td><code>[chunkhash]</code></td> <td>chunk 内容的hash</td></tr> <tr><td><code>[name]</code></td> <td>模块名称会取文件名</td></tr> <tr><td><code>[id]</code></td> <td>模块标识符</td></tr> <tr><td><code>[query]</code></td> <td>模块的 query ,例如文件名？后面的字符串</td></tr> <tr><td><code>[function]</code></td> <td>一个return出一个 string 作为 filename 的函数</td></tr></tbody></table></li></ul> <h2 id="webpack-的-sourcemap-有几种形式？-分别有什么特点？-sourcemap-配置的最佳实践是什么？"><a href="#webpack-的-sourcemap-有几种形式？-分别有什么特点？-sourcemap-配置的最佳实践是什么？" aria-hidden="true" class="header-anchor">#</a> Webpack 的 SourceMap 有几种形式？ 分别有什么特点？ SourceMap 配置的最佳实践是什么？</h2> <table><thead><tr><th style="text-align:left;">devtool</th> <th style="text-align:left;">构建速度</th> <th style="text-align:left;">重新构建速度</th> <th style="text-align:left;">生产环境</th> <th style="text-align:left;">品质(quality)</th></tr></thead> <tbody><tr><td style="text-align:left;">留空，none</td> <td style="text-align:left;">+++</td> <td style="text-align:left;">+++</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">打包后的代码</td></tr> <tr><td style="text-align:left;">eval</td> <td style="text-align:left;">+++</td> <td style="text-align:left;">+++</td> <td style="text-align:left;">no</td> <td style="text-align:left;">生成后的代码</td></tr> <tr><td style="text-align:left;">cheap-eval-source-map</td> <td style="text-align:left;">+</td> <td style="text-align:left;">++</td> <td style="text-align:left;">no</td> <td style="text-align:left;">转换过的代码（仅限行）</td></tr> <tr><td style="text-align:left;">cheap-module-eval-source-map</td> <td style="text-align:left;">o</td> <td style="text-align:left;">++</td> <td style="text-align:left;">no</td> <td style="text-align:left;">原始源代码（仅限行）</td></tr> <tr><td style="text-align:left;">eval-source-map</td> <td style="text-align:left;">–</td> <td style="text-align:left;">+</td> <td style="text-align:left;">no</td> <td style="text-align:left;">原始源代码</td></tr> <tr><td style="text-align:left;">cheap-source-map</td> <td style="text-align:left;">+</td> <td style="text-align:left;">o</td> <td style="text-align:left;">no</td> <td style="text-align:left;">转换过的代码（仅限行）</td></tr> <tr><td style="text-align:left;">cheap-module-source-map</td> <td style="text-align:left;">o</td> <td style="text-align:left;">-</td> <td style="text-align:left;">no</td> <td style="text-align:left;">原始源代码（仅限行）</td></tr> <tr><td style="text-align:left;">inline-cheap-source-map</td> <td style="text-align:left;">+</td> <td style="text-align:left;">o</td> <td style="text-align:left;">no</td> <td style="text-align:left;">转换过的代码（仅限行）</td></tr> <tr><td style="text-align:left;">inline-cheap-module-source-map</td> <td style="text-align:left;">o</td> <td style="text-align:left;">-</td> <td style="text-align:left;">no</td> <td style="text-align:left;">原始源代码（仅限行）</td></tr> <tr><td style="text-align:left;">source-map</td> <td style="text-align:left;">–</td> <td style="text-align:left;">–</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">原始源代码</td></tr> <tr><td style="text-align:left;">inline-source-map</td> <td style="text-align:left;">–</td> <td style="text-align:left;">–</td> <td style="text-align:left;">no</td> <td style="text-align:left;">原始源代码</td></tr> <tr><td style="text-align:left;">hidden-source-map</td> <td style="text-align:left;">–</td> <td style="text-align:left;">–</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">原始源代码</td></tr> <tr><td style="text-align:left;">nosources-source-map</td> <td style="text-align:left;">–</td> <td style="text-align:left;">–</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">无源代码内容</td></tr></tbody></table> <blockquote><p><code>+++</code> 非常快速, <code>++</code> 快速, <code>+</code> 比较快, <code>o</code> 中等, <code>-</code> 比较慢, <code>--</code> 慢</p></blockquote> <p><strong>一般在实际项目中，推荐生产环境不使用或者使用 source-map（如果有 Sentry 这类错误跟踪系统），开发环境使用<code>cheap-module-eval-source-map</code>。</strong></p> <h2 id="什么是-bundle-，什么是-chunk-什么是-module-？"><a href="#什么是-bundle-，什么是-chunk-什么是-module-？" aria-hidden="true" class="header-anchor">#</a> 什么是 bundle ，什么是 chunk 什么是 module ？</h2> <h2 id="能不能手写一个-webpack-配置？记住重点配置项：entry、output、module-rules（loader）和plugin。"><a href="#能不能手写一个-webpack-配置？记住重点配置项：entry、output、module-rules（loader）和plugin。" aria-hidden="true" class="header-anchor">#</a> 能不能手写一个 Webpack 配置？记住重点配置项：<code>entry</code>、<code>output</code>、<code>module.rules</code>（loader）和<code>plugin</code>。</h2> <h2 id="在-js-文件中怎么调用-loader-来处理一个模块？"><a href="#在-js-文件中怎么调用-loader-来处理一个模块？" aria-hidden="true" class="header-anchor">#</a> 在 JS 文件中怎么调用 Loader 来处理一个模块？</h2> <h2 id="loader-的解析顺序是怎样的？"><a href="#loader-的解析顺序是怎样的？" aria-hidden="true" class="header-anchor">#</a> Loader 的解析顺序是怎样的？</h2> <h2 id="什么是-javascript-的模块化开发？有哪些可以遵循的规范？"><a href="#什么是-javascript-的模块化开发？有哪些可以遵循的规范？" aria-hidden="true" class="header-anchor">#</a> 什么是 JavaScript 的模块化开发？有哪些可以遵循的规范？</h2> <h2 id="webpack-中怎么获取一个模块引用另外一个模块是传入的-query？"><a href="#webpack-中怎么获取一个模块引用另外一个模块是传入的-query？" aria-hidden="true" class="header-anchor">#</a> Webpack 中怎么获取一个模块引用另外一个模块是传入的 query？</h2> <h2 id="怎么实现-webpack-的按需加载？什么是神奇注释？"><a href="#怎么实现-webpack-的按需加载？什么是神奇注释？" aria-hidden="true" class="header-anchor">#</a> 怎么实现 Webpack 的按需加载？什么是神奇注释？</h2> <h2 id="babel-的-preset-env-是什么？"><a href="#babel-的-preset-env-是什么？" aria-hidden="true" class="header-anchor">#</a> Babel 的 preset-env 是什么？</h2> <h2 id="懂得-babel-的原理吗？你会手写-babel-插件吗？"><a href="#懂得-babel-的原理吗？你会手写-babel-插件吗？" aria-hidden="true" class="header-anchor">#</a> 懂得 Babel 的原理吗？你会手写 Babel 插件吗？</h2> <h2 id="babel-怎么做-polyfill，polyfill-的最佳实践是什么？"><a href="#babel-怎么做-polyfill，polyfill-的最佳实践是什么？" aria-hidden="true" class="header-anchor">#</a> Babel 怎么做 Polyfill，Polyfill 的最佳实践是什么？</h2> <h2 id="babel-怎么针对不同的浏览器打包不同的适配代码"><a href="#babel-怎么针对不同的浏览器打包不同的适配代码" aria-hidden="true" class="header-anchor">#</a> Babel 怎么针对不同的浏览器打包不同的适配代码?</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notes-and-blog/webpack/" class="prev router-link-active">
          Webpack
        </a></span> <span class="next"><a href="/notes-and-blog/webpack/1.什么是webpack.html">
          Webpack 是什么
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/notes-and-blog/assets/js/app.0b4b2de9.js" defer></script><script src="/notes-and-blog/assets/js/2.a69d6162.js" defer></script><script src="/notes-and-blog/assets/js/33.e7d18a0f.js" defer></script><script src="/notes-and-blog/assets/js/3.58d7ffb3.js" defer></script>
  </body>
</html>
