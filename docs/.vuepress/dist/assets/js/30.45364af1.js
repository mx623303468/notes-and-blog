(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{200:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"编译-es6-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译-es6-7","aria-hidden":"true"}},[t._v("#")]),t._v(" 编译 ES6 7")]),t._v(" "),a("blockquote",[a("p",[t._v("webpack 4.x | babel-loader 8.x | babel 7.x"),a("br"),t._v(" "),a("code",[t._v("npm install -D babel-loader @babel/core @babel/preset-env webpack")])])]),t._v(" "),a("blockquote",[a("p",[t._v("webpack 4.x | babel-loader 7.x | babel 6.x"),a("br"),t._v(" "),a("code",[t._v("npm install -D babel-loader@7 babel-core babel-preset-env webpack")])])]),t._v(" "),a("p",[a("strong",[t._v("如果 babel-loader 是 8.0.0 之后的版本，需要安装指定版本的 @babel/core 与 @babel/preset-env")])]),t._v(" "),a("p",[a("strong",[t._v("在配置文件中，涉及的配置项使用，也需要改为 "),a("code",[t._v("@babel/preset-env")]),t._v("这种形式的")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("需要安装的 loader "),a("code",[t._v("babel-loader")])]),t._v(" "),a("ul",[a("li",[t._v("安装最新版的 "),a("code",[t._v("npm install babel-loader")])]),t._v(" "),a("li",[t._v("一般安装 "),a("code",[t._v("npm install --save-dev babel-loader babel-core")])])])]),t._v(" "),a("li",[a("p",[t._v("新建一个文件夹 "),a("code",[t._v("demo")]),t._v("，进入 "),a("code",[t._v("cd demo")]),t._v(" ，然后初始化一下 "),a("code",[t._v("npm init -y")]),t._v("，完成后文件夹内会多一个 "),a("code",[t._v("package.json")]),t._v("和 "),a("code",[t._v("package-lock.json")]),t._v(" 的配置文件。")])]),t._v(" "),a("li",[a("p",[t._v("安装需要的 loader 按上述命令安装即可。")])]),t._v(" "),a("li",[a("p",[t._v("安装完成后，在项目目录内创建 "),a("code",[t._v("app.js")]),t._v(" "),a("code",[t._v("index.html")]),t._v(" "),a("code",[t._v("webpack.config.js")])])]),t._v(" "),a("li",[a("p",[t._v("编辑 "),a("code",[t._v("webpack.config.js")]),t._v(" 配置文件，增加入口 "),a("code",[t._v("entry")]),t._v(" 与出口 "),a("code",[t._v("output")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].[hash:5].js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.js$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        exclude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/node_modules/'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("此时还需要一个 "),a("code",[t._v("babel-presets")]),t._v(" 规范的插件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("npm install @babel/preset-env --save-dev")]),t._v(" 如果 "),a("code",[t._v("babel-loader")]),t._v(" 是安装的 8.x 版本，就使用这一句。")]),t._v(" "),a("li",[a("code",[t._v("npm install babel-preset-env --save-dev")]),t._v(" 如果"),a("code",[t._v("babel-loader")]),t._v(" 是安装的 7.x，就使用这一句。")])])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("安装完成后，我们需要给我们安装的 loader 指定一个 preset 。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("修改 use")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    presets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        targets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          browsers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'> 1%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'last 2 versions'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])])])]),t._v(" "),a("li",[a("p",[t._v("在 "),a("code",[t._v("app.js")]),t._v(" 文件中添加一些东西，来打包编译一下。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NUM")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arrB "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" item "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'new Set(arrB)'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arrB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("运行 "),a("code",[t._v("webpack")]),t._v(" 打包成功")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("PS D:\\test\\my-webpack\\3-3> webpack\nHash: c51e1f6c979a6f1f782b\nVersion: webpack 3.10.0\nTime: 565ms\n       Asset     Size  Chunks             Chunk Names\napp.c51e1.js  2.68 kB       0  [emitted]  app\n   [0] ./app.js 186 bytes {0} [built]\n")])])])]),t._v(" "),a("li",[a("p",[t._v("但是此时我们观察一下打包好的文件，发现有些还是没有转换。只能针对语法进行了转换，而针对低版本浏览器没有的函数和方法是没有转换的，所以还需要两个插件。")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("Babel Polyfill")]),a("br"),t._v("\n全局垫片，引入之后会在全局进行变量定义，可以理解为会污染全局变量。为开发应用准备的插件。"),a("br"),t._v("\n使用方法："),a("br"),t._v(" "),a("code",[t._v("npm install @babel/polyfill --save")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Babel Runtime Transform")]),a("br"),t._v("\n局部垫片，为了开发框架而准备的，不会污染全局。"),a("br"),t._v("\n使用方法："),a("br"),t._v(" "),a("code",[t._v("npm install @babel/plugin-transform-runtime --save-dev")])]),t._v(" "),a("p",[a("code",[t._v("npm install @babel/runtime --save")])])])])]),t._v(" "),a("li",[a("p",[t._v("这里把上述的插件都安装上")]),t._v(" "),a("p",[a("code",[t._v("npm install @babel/polyfill @babel/runtime --save")])]),t._v(" "),a("p",[a("code",[t._v("npm install @babel/plugin-transform-runtime --save-dev")])])]),t._v(" "),a("li",[a("p",[t._v("使用 "),a("code",[t._v("@babel/polyfill")]),t._v(" 时，在 "),a("code",[t._v("app.js")]),t._v(" (入口文件)中 "),a("code",[t._v("import @babel/polyfill")]),t._v("\n这时再打包文件，会发现文件非常大，那我们使用一下 "),a("code",[t._v("@babel/runtime")])])]),t._v(" "),a("li",[a("p",[t._v("使用 "),a("code",[t._v("@babel/runtime")]),t._v(" 时，在根目录 新建 "),a("code",[t._v(".babelrc")]),t._v(" 文件 用来配置。")]),t._v(" "),a("ul",[a("li",[t._v("把 "),a("code",[t._v("webapck.config.js")]),t._v("文件 "),a("code",[t._v("module")]),t._v(" 中的 "),a("code",[t._v("presets")]),t._v(" 移动到 "),a("code",[t._v(".babelrc")]),t._v(" 文件中。\n再增加一个 "),a("code",[t._v("plugins")]),t._v(" , 把刚刚安装的 "),a("code",[t._v("@babel/plugin-transform-runtime")]),t._v(" 配置上。")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"targets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"browsers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"> 1%"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"last 2 versions"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/plugin-transform-runtime"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("运行 "),a("code",[t._v("webpack")]),t._v(" 打包成功")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" PS D:\\test\\my-webpack\\3-3> webpack\n Hash: 04b45de1843b1e27155f\n Version: webpack 3.10.0\n Time: 1627ms\n        Asset     Size  Chunks             Chunk Names\n app.04b45.js  73.2 kB       0  [emitted]  app\n   [60] ./app.js 386 bytes {0} [built]\n     + 121 hidden modules\n")])])]),a("p",[t._v("查看新编译的文件，找到自己写的代码，发现已经全部被转换了。")])])]),t._v(" "),a("blockquote",[a("p",[t._v("一般在应用开发中，我们只需要使用 "),a("code",[t._v("Babel Polyfilll")]),t._v(" 在入口文件中 "),a("code",[t._v("import 'babel-polyfill'")]),t._v(" 就可以使用 ES6 这些新语法了。在开发框架之类的，需要给其他人用的，就需要使用 "),a("code",[t._v("Babel Runtime Transform")])])])])},[],!1,null,null,null);s.default=e.exports}}]);